{% extends "dlf-base.html" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
  <span class="govuk-caption-xl">Dataset</span>
  <h1 class="govuk-heading-xl">{{datasets[dataset]["name"]}}</h1>

  <span class="govuk-caption-xl">Organisation</span>
  <h1 class="govuk-heading-xl">{{organisation["name"]}}</h1>
    <p class="govuk-body">Contents</p>
    <ul class="govuk-list govuk-list--bullet">
      <li><a href="#log">Log</a></li>
      <li><a href="#download">Download the data</a>
    </ul>

  </div>
</div>

<hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h2 class="govuk-heading-l" id="log">Log</h2>
    <ul class="govuk-list">
    {% for o in index["dataset"][dataset]["organisation"][organisation["organisation"]]["log"] %}
        {% for d,v in o.items() %}
            <dl class="govuk-summary-list">

  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Date</dt>
    <dd class="govuk-summary-list__value">{{d}}</dd>
  </div>
{% if index["log"][d][v]["url"] %}  
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">URL</dt>
    <dd class="govuk-summary-list__value"><a href="index["url"][{{v}}]">{{ index["url"][v]}}</a></dd>
  </div>
{% endif %}
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Headers</dt>
    <dd class="govuk-summary-list__value"><a href="https://raw.githubusercontent.com/digital-land/brownfield-land-collection/master/collection/log/{{d}}/{{v}}.json">{{v}}</a></dd>
  </div>
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Date-time</dt>
    <dd class="govuk-summary-list__value">{{ index["log"][d][v]["datetime"] }}</dd>
  </div>
{% if index["log"][d][v]["elapsed"] %}  
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Elapsed</dt>
    <dd class="govuk-summary-list__value">{{ index["log"][d][v]["elapsed"] }}</dd>
  </div>
{% endif %}
{% if index["log"][d][v]["status"] %}  
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Status</dt>
    <dd class="govuk-summary-list__value">{{ index["log"][d][v]["status"] }}</dd>
  </div>
{% endif %}
{% if index["log"][d][v]["exception"] %}  
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Exception</dt>
    <dd class="govuk-summary-list__value">{{ index["log"][d][v]["exception"] }}</dd>
  </div>
{% endif %}
{% if index["log"][d][v]["resource"] %}  
  <div class="govuk-summary-list__row">
    <dt class="govuk-summary-list__key">Resource</dt>
    <dd class="govuk-summary-list__value"><a href="/resource/{{ index["log"][d][v]["resource"] }}">{{ index["log"][d][v]["resource"] }}</a></dd>
  </div>
{% endif %}

        {% endfor %}
    {% endfor %}
    </ul>
  </div>
</div>


<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h2 class="govuk-heading-l" id="download">Download the data</h2>
    <p class="govuk-body">You can download the data on this page from the <a href="{{datasets[dataset]["documentation-url"]}}">GitHub project</a>.</p>
  </div>
</div>
{% endblock %}



{% block bodyEnd %}
{{ super() }}
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-127566551-1', 'auto');
ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
{% endblock %}
