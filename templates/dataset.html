{% extends "leaflet-base.html" %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    "classes": "govuk-width-container",
    "tag": {
      "text": "prototype"
    },
    "html": 'This is a prototype. Please provide feedback to the Digital Land team.'
  }) }}

  {{ govukBreadcrumbs({
    "items": [
      {
        "text": "Digital Land",
        "href": "../../"
      },
      {
        "text": "Datasets",
        "href": "../"
      },
      {
        "text": dataset["name"],
      }
    ]
  }) }}

{% endblock %}

{% block pageTitle %}{{dataset["name"]}} | Datasets | Digital Land{% endblock %}

{% block content %}
<div class="govuk-grid-row">
	<div class="govuk-grid-column-full">
     <span class="govuk-caption-xl">Dataset</span>
     <h1 class="govuk-heading-xl">{{dataset["name"]}}</h1>
	</div>
</div>

<hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-quarter">
    <p>
        <span class="govuk-body govuk-!-font-size-48 govuk-!-font-weight-bold">{{dataset["stats"]["organisations"]}}</span><br>
        <span class="govuk-body-l"><a href="organisation" class="govuk-link">Organisations</a></span>
    </p>
  </div>
  <div class="govuk-grid-column-one-quarter">
    <p>
        <span class="govuk-body govuk-!-font-size-48 govuk-!-font-weight-bold">{{dataset["stats"]["urls"]}}</span><br>
        <span class="govuk-body-l"><a href="link" class="govuk-link">Links</a></span>
    </p>
  </div>
  <div class="govuk-grid-column-one-quarter">
    <p>
        <span class="govuk-body govuk-!-font-size-48 govuk-!-font-weight-bold">{{dataset["stats"]["resources"]}}</span><br>
        <span class="govuk-body-l"><a href="resource" class="govuk-link">Resources</a></span>
    </p>
  </div>
</div>

<h2 class="govuk-heading-l govuk-!-margin-top-6" id="national-dataset-map">View the data</h2>
<div id="map" style="width: 100%; height: 640px;"></div>

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h2 class="govuk-heading-l" id="download">Download the data</h2>
    <p class="govuk-body">You can download the data on this page from the <a href="{{dataset["documentation-url"]}}">GitHub project</a>.</p>
  </div>
</div>

{% endblock %}

{% block bodyEnd %}
{{ super() }}
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-127566551-1', 'auto');
ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script>
  const bbox = [-10.855, 2.0215, 49.824, 59.479] // (min_lng, max_lng, min_lat, max_lat)

  // grey-scale tiles
  const base = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      id: 'base',
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions">CARTO</a>',
      maxZoom: 18
  });

  const map = L.map('map', { preferCanvas: true, renderer: L.canvas({ padding: 0.5 }), layers: [base] })
    .fitBounds([[bbox[2], bbox[0]], [bbox[3], bbox[1]]]);

  var map_width = map._container.offsetWidth;
  map._container.style.height = `${map_width * (2/3)}px`;
</script>
{% endblock %}
